@component-name = "portal-user-interface"
definition {
	property osgi.app.includes = "frontend-theme-westeros-bank";
	property plugins.deployment.type = "osgi";
	property portal.release = "true";
	property portal.upstream = "true";
	property testray.main.component.name = "User Interface";

	setUp {
		TestCase.setUpPortalInstance();

		User.firstLoginPG();
	}

	tearDown {
		var testPortalInstance = PropsUtil.get("test.portal.instance");

		if ("${testPortalInstance}" == "true") {
			PortalInstances.tearDownCP();
		}
	}

	@priority = "5"
	test AddThemeSite {
		property portal.acceptance = "true";
		property test.name.skip.portal.instance = "WesterosTheme#AddThemeSite";
		var themeContainsResources = PropsUtil.get("theme.contains.resources");

		if ("${themeContainsResources}" == "true") {
			ProductMenu.gotoPortlet(
				category = "Sites",
				panel = "Control Panel",
				portlet = "Sites"
			);

			Site.addSiteTemplateCP(
				siteName = "Westeros Bank Theme Site",
				siteTemplateName = "Westeros Bank Theme"
			);

			ProductMenu.gotoSite(site = "Westeros Bank Theme Site");

			AssertClick(
				locator1 = "Home#PAGE",
				value1 = "FOR YOU",
				key_pageName = "For You"
			);

			MouseOver(locator1 = "Home#PAGE", key_pageName = "Checking and Credit Cards");

			AssertClick(
				locator1 = "Home#PAGE_CHILD_PAGE",
				value1 = "All credit cards",
				key_childPageName = "All credit cards"
			);

			AssertTextEquals(
				locator1 = "Header#H2_TITLE",
				value1 = "We help you to achieve your goals",
				key_title = "We help you to achieve your goals"
			);
		}
		else {
			var appName = "westeros-bank-theme";

			ProductMenu.gotoPortlet(
				category = "Apps",
				panel = "Control Panel",
				portlet = "App Manager"
			);

			Type(locator1 = "TextInput#SEARCH", value1 = "${appName}");

			Click(locator1 = "Icon#BASIC_SEARCH");

			AssertVisible(
				locator1 = "ListGroupItem#ITEM_NAME_LINK",
				key_itemName = "westeros-bank-theme"
			);
		}
	}
}