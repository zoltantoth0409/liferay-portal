<definition>
	<var name="password" value="test" />
	<var name="userEmailAddress" value="test@liferay.com" />

	<command name="_login">
		<execute function="AssertClick" locator1="UserBar#USER_SIGN_IN" value1="Sign In" />

		<execute function="Type" locator1="TextInput#EMAIL_ADDRESS" value1="${userEmailAddress}" />
		<execute function="Type" locator1="TextInput#PASSWORD" value1="${password}" />

		<execute function="Click" locator1="Button#SIGN_IN" />
	</command>

	<command name="acceptEndUserLicenseAgreement">
		<if>
			<condition function="IsElementPresent" locator1="Button#I_AGREE" value1="I Agree" />
			<then>
				<execute function="AssertClick" locator1="Button#I_AGREE" value1="I Agree" />

				<execute function="AssertElementNotPresent" locator1="Button#I_AGREE" />
			</then>
		</if>
	</command>

	<command name="activateCP">
		<execute function="Click" locator1="Dropdown#FILTER_AND_ORDER" />

		<execute macro="MenuItem#click">
			<var name="menuItem" value="Inactive" />
		</execute>

		<execute macro="LexiconEntry#gotoEntryMenuItem">
			<var name="menuItem" value="Activate" />
			<var name="rowEntry" value="${userScreenName}" />
		</execute>

		<execute macro="Alert#viewSuccessMessage" />

		<execute macro="ProductMenu#gotoPortlet">
			<var name="category" value="Users" />
			<var name="panel" value="Control Panel" />
			<var name="portlet" value="Users and Organizations" />
		</execute>

		<var name="key_userScreenName" value="${userScreenName}" />

		<execute function="AssertTextEquals" locator1="UsersAndOrganizations#USER_TABLE_NAME" value1="${userName}" />
		<execute function="AssertTextEquals" locator1="UsersAndOrganizations#USER_TABLE_SCREEN_NAME" value1="${userScreenName}" />
	</command>

	<command name="addAdditionalEmailAddressViaMyAccount">
		<execute function="Click" locator1="NavListItem#ADDITIONAL_EMAIL_ADDRESSES" />

		<execute function="Type" locator1="MyAccount#ADDITIONAL_EMAIL_ADDRESSES_EMAIL_ADDRESS_FIELD" value1="${userAdditionalEmailAddress}" />

		<execute function="Select" locator1="MyAccount#ADDITIONAL_EMAIL_ADDRESSES_TYPE_SELECT" value1="Email Address" />

		<execute function="Click" locator1="MyAccount#ADDITIONAL_EMAIL_ADDRESSES_PRIMARY_RADIO_BUTTON" />

		<execute function="Click" locator1="Button#SAVE" />

		<execute macro="Alert#viewSuccessMessage" />

		<execute function="SelectFrame" value1="relative=top" />
	</command>

	<command name="addAddressViaMyAccount">
		<execute function="Click" locator1="NavBar#ADDRESSES" />

		<execute function="Type" locator1="TextInput#STREET_1" value1="${userAddressStreet1}" />

		<if>
			<isset var="userAddressCountry" />
			<then>
				<execute function="Select" locator1="Select#COUNTRY" value1="${userAddressCountry}" />
			</then>
		</if>

		<if>
			<isset var="userAddressRegion" />
			<then>
				<execute function="Select" locator1="Select#REGION" value1="${userAddressRegion}" />
			</then>
		</if>

		<if>
			<isset var="userAddressPostalCode" />
			<then>
				<execute function="Type" locator1="TextInput#POSTAL_CODE" value1="${userAddressPostalCode}" />
			</then>
		</if>

		<if>
			<isset var="userAddressType" />
			<then>
				<execute function="Select" locator1="Select#TYPE" value1="${userAddressType}" />
			</then>
		</if>

		<execute function="Type" locator1="TextInput#CITY" value1="${userAddressCity}" />

		<execute function="Click" locator1="Radio#PRIMARY" />
		<execute function="Check" locator1="Checkbox#MAILING" />

		<execute function="Click" locator1="Button#SAVE" />

		<execute macro="Alert#viewSuccessMessage" />

		<execute function="SelectFrame" value1="relative=top" />
	</command>

	<command name="addCommentViaMyAccount">
		<execute function="Click" locator1="NavListItem#COMMENTS" />

		<execute function="Type" locator1="MyAccount#COMMENTS_FIELD" value1="${userIntroduction}" />

		<execute function="Click" locator1="Button#SAVE" />

		<execute macro="Alert#viewSuccessMessage" />

		<execute function="SelectFrame" value1="relative=top" />
	</command>

	<command name="addCP">
		<execute macro="LexiconEntry#gotoAdd" />

		<execute function="Type" locator1="UsersAndOrganizationsEditUser#DETAILS_SCREEN_NAME_FIELD" value1="${userScreenName}" />
		<execute function="Type" locator1="UsersAndOrganizationsEditUser#DETAILS_EMAIL_ADDRESS_FIELD" value1="${userEmailAddress}" />
		<execute function="Type" locator1="UsersAndOrganizationsEditUser#DETAILS_FIRST_NAME_FIELD" value1="${userFirstName}" />

		<if>
			<isset var="userBirthday" />
			<then>
				<execute function="Type" locator1="UsersAndOrganizationsEditUser#DETAILS_BIRTHDAY_FIELD" value1="${userBirthday}" />
			</then>
		</if>

		<if>
			<isset var="userMiddleName" />
			<then>
				<execute function="Type" locator1="UsersAndOrganizationsEditUser#DETAILS_MIDDLE_NAME_FIELD" value1="${userMiddleName}" />
			</then>
		</if>

		<if>
			<isset var="userGender" />
			<then>
				<execute function="Select" locator1="UsersAndOrganizationsEditUser#DETAILS_GENDER_SELECT" value1="${userGender}" />
			</then>
		</if>

		<execute function="Type" locator1="UsersAndOrganizationsEditUser#DETAILS_LAST_NAME_FIELD" value1="${userLastName}" />

		<execute function="AssertClick" locator1="Button#SUBMIT" value1="Save" />

		<if>
			<equals arg1="${userEmailAddressVariation}" arg2="Invalid" />
			<then>
				<execute function="AssertTextEquals" locator1="Message#ERROR_ENTER_A_VALID_EMAIL_ADDRESS" value1="Please enter a valid email address." />
			</then>
			<elseif>
				<equals arg1="${userEmailAddressVariation}" arg2="Null" />
				<then>
					<execute macro="Alert#viewRequiredField" />
				</then>
			</elseif>
			<elseif>
				<equals arg1="${userEmailAddressVariation}" arg2="Root" />
				<then>
					<execute macro="Alert#viewRequestFailedToComplete" />

					<execute function="AssertTextEquals#assertPartialText" locator1="Message#ERROR_ENTER_A_VALID_EMAIL_ADDRESS" value1="Please enter a valid email address." />
				</then>
			</elseif>
			<elseif>
				<equals arg1="${userScreenNameVariation}" arg2="Invalid" />
				<then>
					<execute function="AssertTextEquals" locator1="Message#ERROR_FORM_VALIDATION" value1="The screen name cannot be an email address or a reserved word, such as postfix. It must contain only alphanumeric or the following special characters: -._." />
				</then>
			</elseif>
			<else>
				<execute macro="Alert#viewSuccessMessage" />
				<execute function="AssertTextEquals" locator1="UsersAndOrganizationsEditUser#DETAILS_SCREEN_NAME_FIELD" value1="${userScreenName}" />
				<execute function="AssertTextEquals" locator1="UsersAndOrganizationsEditUser#DETAILS_EMAIL_ADDRESS_FIELD" value1="${userEmailAddress}" />
				<execute function="AssertTextEquals" locator1="UsersAndOrganizationsEditUser#DETAILS_FIRST_NAME_FIELD" value1="${userFirstName}" />

				<if>
					<isset var="userMiddleName" />
					<then>
						<execute function="AssertTextEquals" locator1="UsersAndOrganizationsEditUser#DETAILS_MIDDLE_NAME_FIELD" value1="${userMiddleName}" />
					</then>
				</if>

				<execute function="AssertTextEquals" locator1="UsersAndOrganizationsEditUser#DETAILS_LAST_NAME_FIELD" value1="${userLastName}" />
			</else>
		</if>
	</command>

	<command name="addCreateAccountPG">
		<execute macro="User#createAccount">
			<var name="userEmailAddress" value="${userEmailAddress}" />
			<var name="userFirstName" value="${userFirstName}" />
			<var name="userLastName" value="${userLastName}" />
			<var name="userScreenName" value="${userScreenName}" />
		</execute>

		<execute function="AssertElementPresent" locator1="Message#SUCCESS" />
	</command>

	<command name="addInstantMessengerViaMyAccount">
		<execute function="Click" locator1="NavListItem#INSTANT_MESSENGER" />

		<if>
			<isset var="userInstantMessengerJabber" />
			<then>
				<execute function="Type" locator1="TextInput#JABBER" value1="${userInstantMessengerJabber}" />
			</then>
		</if>

		<if>
			<isset var="userInstantMessengerSkype" />
			<then>
				<execute function="Type" locator1="TextInput#SKYPE" value1="${userInstantMessengerSkype}" />
			</then>
		</if>

		<execute function="Click" locator1="Button#SAVE" />

		<execute macro="Alert#viewSuccessMessage" />

		<execute function="SelectFrame" value1="relative=top" />
	</command>

	<command name="addMultipleCP">
		<for list="${usersEmailsList}" param="userEmail">
			<var name="userEmailAddress" value="${userEmail}" />
			<var method="StringUtil#replace('${userEmail}', '@liferay.com', '')" name="userName" />

			<execute macro="ProductMenu#gotoPortlet">
				<var name="category" value="Users" />
				<var name="panel" value="Control Panel" />
				<var name="portlet" value="Users and Organizations" />
			</execute>

			<execute macro="User#addCP">
				<var name="userBirthday" value="${userBirthday}" />
				<var name="userEmailAddress" value="${userEmailAddress}" />
				<var name="userEmailAddressVariation" value="${userEmailAddressVariation}" />
				<var name="userFirstName" value="${userName}" />
				<var name="userGender" value="${userGender}" />
				<var name="userLastName" value="${userName}" />
				<var name="userMiddleName" value="${userMiddleName}" />
				<var name="userScreenName" value="${userName}" />
				<var name="userScreenNameVariation" value="${userScreenNameVariation}" />
			</execute>
		</for>
	</command>

	<command name="addPersonalSiteCP">
		<execute macro="UserNavigator#gotoUser">
			<var name="userScreenName" value="${userScreenName}" />
		</execute>

		<execute macro="UserNavigator#gotoProfileAndDashboard" />

		<execute function="AssertTextEquals" locator1="UsersAndOrganizationsEditUser#PERSONAL_SITE_LABEL" value1="DASHBOARD">
			<var name="key_subtitle" value="Dashboard" />
		</execute>

		<execute function="Select" locator1="UsersAndOrganizationsEditUser#PERSONAL_SITE_MY_DASHBOARD" value1="${siteTemplateName}" />

		<execute macro="PortletEntry#save" />
	</command>

	<command name="addPhoneNumbersViaMyAccount">
		<execute function="Click" locator1="NavListItem#PHONE_NUMBERS" />

		<execute function="Type" locator1="TextInput#NUMBER" value1="${userPhoneNumberNumber}" />

		<if>
			<isset var="userPhoneNumberExtension" />
			<then>
				<execute function="Type" locator1="TextInput#EXTENSION" value1="${userPhoneNumberExtension}" />
			</then>
		</if>

		<execute function="Select" locator1="MyAccount#PHONE_NUMBERS_TYPE_SELECT" value1="${userPhoneNumberType}" />

		<execute function="Click" locator1="MyAccount#PHONE_NUMBERS_PRIMARY_RADIO_BUTTON" />

		<execute function="Click" locator1="Button#SAVE" />

		<execute macro="Alert#viewSuccessMessage" />

		<execute function="SelectFrame" value1="relative=top" />
	</command>

	<command name="addProfilePictureViaMyAccount">
		<execute function="Click" locator1="Button#CHANGE" />

		<execute function="Pause" locator1="1000" />

		<execute function="SelectFrame" value1="relative=top" />

		<execute function="SelectFrame" locator1="IFrame#UPLOAD_IMAGE" />

		<execute function="UploadCommonFile" locator1="UploadImage#BROWSE_BUTTON" value1="${imageFileName}" />

		<execute function="Pause" locator1="1000" />

		<execute function="SelectFrame" value1="relative=top" />

		<execute function="SelectFrame" locator1="IFrame#UPLOAD_IMAGE" />

		<execute function="Click" locator1="Button#SAVE" />

		<execute function="Pause" locator1="1000" />

		<execute function="SelectFrame" value1="relative=top" />

		<execute function="Click" locator1="Button#SAVE" />

		<execute macro="Alert#viewSuccessMessage" />

		<execute function="Pause" locator1="1000" />
	</command>

	<command name="addProjectViaMyAccount">
		<execute function="Click" locator1="NavListItem#PROJECTS" />

		<execute function="Type" locator1="MyAccount#PROJECTS_TITLE_FIELD" value1="${userProjectTitle}" />

		<execute function="Select" locator1="MyAccount#PROJECTS_START_DATE_MONTH_SELECT" value1="${userProjectStartDateMonth}" />

		<execute function="Select" locator1="MyAccount#PROJECTS_START_DATE_YEAR_SELECT" value1="${userProjectStartDateYear}" />

		<execute function="Check" locator1="MyAccount#PROJECTS_CURRENT_CHECKBOX" />

		<if>
			<isset var="userProjectDescription" />
			<then>
				<execute macro="PortletEntry#inputDescription">
					<var name="description" value="${userProjectDescription}" />
				</execute>
			</then>
		</if>

		<execute function="Click" locator1="Button#SAVE" />

		<execute macro="Alert#viewSuccessMessage" />

		<execute function="SelectFrame" value1="relative=top" />
	</command>

	<command name="addReservedEmailAddressCP">
		<execute macro="LexiconEntry#gotoAdd" />

		<execute function="Type" locator1="UsersAndOrganizationsEditUser#DETAILS_SCREEN_NAME_FIELD" value1="${userScreenName}" />
		<execute function="Type" locator1="UsersAndOrganizationsEditUser#DETAILS_EMAIL_ADDRESS_FIELD" value1="${userEmailAddress}" />
		<execute function="Type" locator1="UsersAndOrganizationsEditUser#DETAILS_FIRST_NAME_FIELD" value1="${userFirstName}" />
		<execute function="Type" locator1="UsersAndOrganizationsEditUser#DETAILS_LAST_NAME_FIELD" value1="${userLastName}" />

		<execute macro="Button#clickSave" />

		<execute macro="Alert#viewErrorMessage">
			<var name="errorMessage" value="The email address you requested is reserved." />
		</execute>
	</command>

	<command name="addReservedScreenNameCP">
		<execute macro="LexiconEntry#gotoAdd" />

		<execute function="Type" locator1="UsersAndOrganizationsEditUser#DETAILS_SCREEN_NAME_FIELD" value1="${userScreenName}" />
		<execute function="Type" locator1="UsersAndOrganizationsEditUser#DETAILS_EMAIL_ADDRESS_FIELD" value1="${userEmailAddress}" />
		<execute function="Type" locator1="UsersAndOrganizationsEditUser#DETAILS_FIRST_NAME_FIELD" value1="${userFirstName}" />
		<execute function="Type" locator1="UsersAndOrganizationsEditUser#DETAILS_LAST_NAME_FIELD" value1="${userLastName}" />

		<execute macro="Button#clickSave" />

		<execute function="AssertTextEquals#assertPartialText" locator1="Message#ERROR_1" value1="The screen name you requested is reserved." />
	</command>

	<command name="addScreenNameNumberSiteIdCP">
		<execute macro="LexiconEntry#gotoAdd" />

		<execute function="Paste" locator1="UsersAndOrganizationsEditUser#DETAILS_SCREEN_NAME_FIELD" value1="${siteID}" />
		<execute function="Type" locator1="UsersAndOrganizationsEditUser#DETAILS_EMAIL_ADDRESS_FIELD" value1="${userEmailAddress}" />
		<execute function="Type" locator1="UsersAndOrganizationsEditUser#DETAILS_FIRST_NAME_FIELD" value1="${userFirstName}" />
		<execute function="Type" locator1="UsersAndOrganizationsEditUser#DETAILS_LAST_NAME_FIELD" value1="${userLastName}" />

		<execute macro="Button#clickSave" />

		<execute function="AssertTextEquals#assertPartialText" locator1="Message#ERROR_1" value1="The screen name cannot contain only numeric values." />
	</command>

	<command name="addSMSViaMyAccount">
		<execute function="Click" locator1="NavListItem#SMS" />

		<execute function="Type" locator1="MyAccount#SMS_SMS_FIELD" value1="${userSMS}" />

		<execute function="Click" locator1="Button#SAVE" />

		<execute macro="Alert#viewSuccessMessage" />

		<execute function="SelectFrame" value1="relative=top" />
	</command>

	<command name="addSocialNetworkViaMyAccount">
		<execute function="Click" locator1="NavListItem#SOCIAL_NETWORK" />

		<if>
			<isset var="userSocialNetworkFacebook" />
			<then>
				<execute function="Type" locator1="TextInput#FACEBOOK" value1="${userSocialNetworkFacebook}" />
			</then>
		</if>

		<if>
			<isset var="userSocialNetworkTwitter" />
			<then>
				<execute function="Type" locator1="TextInput#TWITTER" value1="${userSocialNetworkTwitter}" />
			</then>
		</if>

		<execute function="Click" locator1="Button#SAVE" />

		<execute macro="Alert#viewSuccessMessage" />

		<execute function="SelectFrame" value1="relative=top" />
	</command>

	<command name="addTagViaMyAccount">
		<execute function="Click" locator1="NavListItem#CATEGORIZATION" />

		<execute function="Type" locator1="AssetCategorization#CATEGORIES_SEARCH_FIELD" value1="${userTag}" />

		<execute function="Click" locator1="Button#ADD" />

		<execute function="Click" locator1="Button#SAVE" />

		<execute macro="Alert#viewSuccessMessage" />

		<execute function="SelectFrame" value1="relative=top" />
	</command>

	<command name="addWebsiteViaMyAccount">
		<execute function="Click" locator1="NavListItem#WEBSITES" />

		<execute function="Type" locator1="MyAccount#WEBSITES_URL_FIELD" value1="${userWebsiteURL}" />

		<execute function="Select" locator1="MyAccount#WEBSITES_TYPE_SELECT" value1="${userWebsiteType}" />

		<execute function="Click" locator1="MyAccount#WEBSITES_PRIMARY_RADIO_BUTTON" />

		<execute function="Click" locator1="Button#SAVE" />

		<execute macro="Alert#viewSuccessMessage" />

		<execute function="SelectFrame" value1="relative=top" />
	</command>

	<command name="advancedSearchViaFriendsDirectoryPG">
		<execute function="Click" locator1="NavBar#SEARCH_TOGGLE_ADVANCED" />

		<if>
			<equals arg1="${searchField}" arg2="First Name" />
			<then>
				<execute function="Type" locator1="TextInput#FIRST_NAME" value1="${searchTerm}" />
			</then>
			<elseif>
				<equals arg1="${searchField}" arg2="Middle Name" />
				<then>
					<execute function="Type" locator1="TextInput#MIDDLE_NAME" value1="${searchTerm}" />
				</then>
			</elseif>
			<elseif>
				<equals arg1="${searchField}" arg2="Last Name" />
				<then>
					<execute function="Type" locator1="TextInput#LAST_NAME" value1="${searchTerm}" />
				</then>
			</elseif>
			<elseif>
				<equals arg1="${searchField}" arg2="Screen Name" />
				<then>
					<execute function="Type" locator1="TextInput#SCREEN_NAME" value1="${searchTerm}" />
				</then>
			</elseif>
			<elseif>
				<equals arg1="${searchField}" arg2="Email Address" />
				<then>
					<execute function="Type" locator1="AdvancedSearch#EMAIL_ADDRESS_FIELD" value1="${searchTerm}" />
				</then>
			</elseif>
		</if>

		<execute function="KeyPress" locator1="AdvancedSearch#EMAIL_ADDRESS_FIELD" value1="\RETURN" />

		<if>
			<equals arg1="${searchNoResults}" arg2="true" />
			<then>
				<execute function="AssertTextEquals" locator1="Message#EMPTY_INFO" value1="No users were found." />

				<var name="key_userScreenName" value="${userScreenName}" />

				<execute function="AssertElementNotPresent" locator1="PortalDirectory#USER_TABLE_FIRST_NAME_LINK" />
				<execute function="AssertElementNotPresent" locator1="PortalDirectory#USER_TABLE_LAST_NAME_LINK" />
				<execute function="AssertElementNotPresent" locator1="PortalDirectory#USER_TABLE_SCREEN_NAME_LINK" />
			</then>
			<else>
				<var name="key_userScreenName" value="${userScreenName}" />

				<execute function="AssertTextEquals" locator1="PortalDirectory#USER_TABLE_FIRST_NAME_LINK" value1="${userFirstName}" />
				<execute function="AssertTextEquals" locator1="PortalDirectory#USER_TABLE_LAST_NAME_LINK" value1="${userLastName}" />
				<execute function="AssertTextEquals" locator1="PortalDirectory#USER_TABLE_SCREEN_NAME_LINK" value1="${userScreenName}" />
			</else>
		</if>
	</command>

	<command name="advancedSearchViaMySitesDirectoryPG">
		<execute function="Click" locator1="NavBar#SEARCH_TOGGLE_ADVANCED" />

		<if>
			<equals arg1="${searchField}" arg2="First Name" />
			<then>
				<execute function="Type" locator1="TextInput#FIRST_NAME" value1="${searchTerm}" />
			</then>
			<elseif>
				<equals arg1="${searchField}" arg2="Middle Name" />
				<then>
					<execute function="Type" locator1="TextInput#MIDDLE_NAME" value1="${searchTerm}" />
				</then>
			</elseif>
			<elseif>
				<equals arg1="${searchField}" arg2="Last Name" />
				<then>
					<execute function="Type" locator1="TextInput#LAST_NAME" value1="${searchTerm}" />
				</then>
			</elseif>
			<elseif>
				<equals arg1="${searchField}" arg2="Screen Name" />
				<then>
					<execute function="Type" locator1="TextInput#SCREEN_NAME" value1="${searchTerm}" />
				</then>
			</elseif>
			<elseif>
				<equals arg1="${searchField}" arg2="Email Address" />
				<then>
					<execute function="Type" locator1="AdvancedSearch#EMAIL_ADDRESS_FIELD" value1="${searchTerm}" />
				</then>
			</elseif>
		</if>

		<execute function="KeyPress" locator1="AdvancedSearch#EMAIL_ADDRESS_FIELD" value1="\RETURN" />

		<if>
			<equals arg1="${searchNoResults}" arg2="true" />
			<then>
				<execute function="AssertTextEquals" locator1="Message#EMPTY_INFO" value1="No users were found." />

				<var name="key_userScreenName" value="${userScreenName}" />

				<execute function="AssertElementNotPresent" locator1="PortalDirectory#USER_TABLE_FIRST_NAME_LINK" />
				<execute function="AssertElementNotPresent" locator1="PortalDirectory#USER_TABLE_LAST_NAME_LINK" />
				<execute function="AssertElementNotPresent" locator1="PortalDirectory#USER_TABLE_SCREEN_NAME_LINK" />
			</then>
			<else>
				<var name="key_userScreenName" value="${userScreenName}" />

				<execute function="AssertTextEquals" locator1="PortalDirectory#USER_TABLE_FIRST_NAME_LINK" value1="${userFirstName}" />
				<execute function="AssertTextEquals" locator1="PortalDirectory#USER_TABLE_LAST_NAME_LINK" value1="${userLastName}" />
				<execute function="AssertTextEquals" locator1="PortalDirectory#USER_TABLE_SCREEN_NAME_LINK" value1="${userScreenName}" />
			</else>
		</if>
	</command>

	<command name="advancedSearchViaPortalDirectoryPG">
		<execute function="Click" locator1="NavBar#SEARCH_TOGGLE_ADVANCED" />

		<if>
			<equals arg1="${searchField}" arg2="First Name" />
			<then>
				<execute function="Type" locator1="TextInput#FIRST_NAME" value1="${searchTerm}" />
			</then>
			<elseif>
				<equals arg1="${searchField}" arg2="Middle Name" />
				<then>
					<execute function="Type" locator1="TextInput#MIDDLE_NAME" value1="${searchTerm}" />
				</then>
			</elseif>
			<elseif>
				<equals arg1="${searchField}" arg2="Last Name" />
				<then>
					<execute function="Type" locator1="TextInput#LAST_NAME" value1="${searchTerm}" />
				</then>
			</elseif>
			<elseif>
				<equals arg1="${searchField}" arg2="Screen Name" />
				<then>
					<execute function="Type" locator1="TextInput#SCREEN_NAME" value1="${searchTerm}" />
				</then>
			</elseif>
			<elseif>
				<equals arg1="${searchField}" arg2="Email Address" />
				<then>
					<execute function="Type" locator1="AdvancedSearch#EMAIL_ADDRESS_FIELD" value1="${searchTerm}" />
				</then>
			</elseif>
		</if>

		<execute function="KeyPress" locator1="AdvancedSearch#EMAIL_ADDRESS_FIELD" value1="\RETURN" />

		<if>
			<equals arg1="${searchNoResults}" arg2="true" />
			<then>
				<execute function="AssertTextEquals" locator1="Message#EMPTY_INFO" value1="No users were found." />

				<var name="key_userScreenName" value="${userScreenName}" />

				<execute function="AssertElementNotPresent" locator1="PortalDirectory#USER_TABLE_FIRST_NAME_LINK" />
				<execute function="AssertElementNotPresent" locator1="PortalDirectory#USER_TABLE_LAST_NAME_LINK" />
				<execute function="AssertElementNotPresent" locator1="PortalDirectory#USER_TABLE_SCREEN_NAME_LINK" />
			</then>
			<else>
				<var name="key_userScreenName" value="${userScreenName}" />

				<execute function="AssertTextEquals" locator1="PortalDirectory#USER_TABLE_FIRST_NAME_LINK" value1="${userFirstName}" />
				<execute function="AssertTextEquals" locator1="PortalDirectory#USER_TABLE_LAST_NAME_LINK" value1="${userLastName}" />
				<execute function="AssertTextEquals" locator1="PortalDirectory#USER_TABLE_SCREEN_NAME_LINK" value1="${userScreenName}" />
			</else>
		</if>
	</command>

	<command name="advancedSearchViaSiteMembersDirectoryPG">
		<execute function="Click" locator1="NavBar#SEARCH_TOGGLE_ADVANCED" />

		<if>
			<equals arg1="${searchField}" arg2="First Name" />
			<then>
				<execute function="Type" locator1="TextInput#FIRST_NAME" value1="${searchTerm}" />
			</then>
			<elseif>
				<equals arg1="${searchField}" arg2="Middle Name" />
				<then>
					<execute function="Type" locator1="TextInput#MIDDLE_NAME" value1="${searchTerm}" />
				</then>
			</elseif>
			<elseif>
				<equals arg1="${searchField}" arg2="Last Name" />
				<then>
					<execute function="Type" locator1="TextInput#LAST_NAME" value1="${searchTerm}" />
				</then>
			</elseif>
			<elseif>
				<equals arg1="${searchField}" arg2="Screen Name" />
				<then>
					<execute function="Type" locator1="TextInput#SCREEN_NAME" value1="${searchTerm}" />
				</then>
			</elseif>
			<elseif>
				<equals arg1="${searchField}" arg2="Email Address" />
				<then>
					<execute function="Type" locator1="AdvancedSearch#EMAIL_ADDRESS_FIELD" value1="${searchTerm}" />
				</then>
			</elseif>
		</if>

		<execute function="KeyPress" locator1="AdvancedSearch#EMAIL_ADDRESS_FIELD" value1="\RETURN" />

		<if>
			<equals arg1="${searchNoResults}" arg2="true" />
			<then>
				<execute function="AssertTextEquals" locator1="Message#EMPTY_INFO" value1="No users were found." />

				<var name="key_userScreenName" value="${userScreenName}" />

				<execute function="AssertElementNotPresent" locator1="PortalDirectory#USER_TABLE_FIRST_NAME_LINK" />
				<execute function="AssertElementNotPresent" locator1="PortalDirectory#USER_TABLE_LAST_NAME_LINK" />
				<execute function="AssertElementNotPresent" locator1="PortalDirectory#USER_TABLE_SCREEN_NAME_LINK" />
			</then>
			<else>
				<var name="key_userScreenName" value="${userScreenName}" />

				<execute function="AssertTextEquals" locator1="PortalDirectory#USER_TABLE_FIRST_NAME_LINK" value1="${userFirstName}" />
				<execute function="AssertTextEquals" locator1="PortalDirectory#USER_TABLE_LAST_NAME_LINK" value1="${userLastName}" />
				<execute function="AssertTextEquals" locator1="PortalDirectory#USER_TABLE_SCREEN_NAME_LINK" value1="${userScreenName}" />
			</else>
		</if>
	</command>

	<command name="answerPasswordReminder">
		<if>
			<condition function="IsElementPresent" locator1="TextInput#ANSWER" />
			<then>
				<execute function="Type" locator1="TextInput#ANSWER" value1="test" />

				<execute macro="Button#clickSave" />

				<execute function="AssertElementNotPresent" locator1="Button#SAVE" />
			</then>
		</if>
	</command>

	<command name="assignOrgRoleCP">
		<execute macro="UserNavigator#gotoUser">
			<var name="userScreenName" value="${userScreenName}" />
		</execute>

		<execute macro="UserNavigator#gotoRoles" />

		<execute function="AssertClick" locator1="UsersAndOrganizationsEditUser#ROLES_ORGANIZATION_ROLES_SELECT_LINK" value1="Select" />

		<execute function="SelectFrame" locator1="IFrame#SELECT_ORGANIZATION_ROLE" />

		<var name="key_roleTitle" value="${roleTitle}" />

		<execute function="AssertTextEquals" locator1="UsersAndOrganizationsEditUser#ROLES_REGULAR_ROLES_TABLE_TITLE" value1="${roleTitle}" />

		<execute function="AssertClick" locator1="UsersAndOrganizationsEditUser#ROLES_ORGANIZATION_SELECT_CHOOSE_BUTTON" value1="Choose" />

		<execute function="SelectFrame" value1="relative=top" />

		<execute function="AssertTextEquals" locator1="UsersAndOrganizationsEditUser#ROLES_ORGANIZATION_ROLES_TABLE_TITLE" value1="${roleTitle}" />

		<execute macro="PortletEntry#save" />
	</command>

	<command name="assignRegularRoleCP">
		<execute macro="UserNavigator#gotoUser">
			<var name="userScreenName" value="${userScreenName}" />
		</execute>

		<execute macro="UserNavigator#gotoRoles" />

		<execute function="AssertClick#assertTextClickCaseInsensitive" locator1="UsersAndOrganizationsEditUser#ROLES_REGULAR_ROLES_SELECT_LINK" value1="Select" />

		<execute function="Pause" locator1="5000" />

		<execute function="SelectFrame" locator1="IFrame#SELECT_REGULAR_ROLE" />

		<var name="key_roleTitle" value="${roleTitle}" />

		<execute function="AssertTextEquals" locator1="UsersAndOrganizationsEditUser#ROLES_REGULAR_ROLES_TABLE_TITLE" value1="${roleTitle}" />

		<execute function="AssertClick" locator1="UsersAndOrganizationsEditUser#ROLES_ORGANIZATION_SELECT_CHOOSE_BUTTON" value1="Choose" />

		<execute function="SelectFrame" value1="relative=top" />

		<execute function="AssertTextEquals" locator1="UsersAndOrganizationsEditUser#ROLES_REGULAR_ROLES_TABLE_TITLE" value1="${roleTitle}" />

		<execute macro="PortletEntry#save" />
	</command>

	<command name="assignSiteRoleCP">
		<execute macro="UserNavigator#gotoUser">
			<var name="userScreenName" value="${userScreenName}" />
		</execute>

		<execute macro="UserNavigator#gotoRoles" />

		<execute function="AssertClick" locator1="UsersAndOrganizationsEditUser#ROLES_SITE_ROLES_SELECT_LINK" value1="Select" />

		<execute function="SelectFrame" locator1="IFrame#SELECT_SITE_ROLE" />

		<var name="key_roleTitle" value="${siteRoleName}" />
		<var name="key_siteRoleName" value="${siteRoleName}" />

		<execute function="AssertTextEquals" locator1="UsersAndOrganizationsEditUser#ROLES_SITE_ROLES_TABLE_TITLE" value1="${siteRoleName}" />

		<execute function="AssertClick" locator1="UsersAndOrganizationsEditUser#ROLES_ORGANIZATION_SELECT_CHOOSE_BUTTON" value1="Choose" />

		<execute function="SelectFrame" value1="relative=top" />

		<execute function="AssertTextEquals" locator1="UsersAndOrganizationsEditUser#ROLES_SITE_ROLES_TABLE_TITLE" value1="${siteRoleName}" />

		<execute macro="PortletEntry#save" />
	</command>

	<command name="attemptImpersonateCP">
		<execute macro="Search#searchCP">
			<var name="searchTerm" value="${userScreenName}" />
		</execute>

		<var name="key_rowEntry" value="${userScreenName}" />

		<if>
			<isset var="notAdmin" />
			<then>
				<execute function="AssertElementNotPresent" locator1="ContentRow#ENTRY_CONTENT_ENTRY_ELLIPSIS" />
				<execute function="AssertElementNotPresent" locator1="UsersAndOrganizations#USER_TABLE_IMPERSONATE" />
			</then>
			<else>
				<execute function="Click" locator1="ContentRow#ENTRY_CONTENT_ENTRY_ELLIPSIS" />

				<execute macro="MenuItem#viewNotPresent">
					<var name="menuItem" value="Impersonate User" />
				</execute>
			</else>
		</if>
	</command>

	<command name="basicSearchCP">
		<if>
			<equals arg1="${userBasicSearch}" arg2="Basic" />
			<then>
				<execute macro="Search#searchCP">
					<var name="searchTerm" value="${userScreenName}" />
				</execute>

				<var name="key_userScreenName" value="${userScreenName}" />

				<execute function="AssertTextEquals" locator1="UsersAndOrganizations#USER_TABLE_NAME" value1="${userName}" />
				<execute function="AssertTextEquals" locator1="UsersAndOrganizations#USER_TABLE_SCREEN_NAME" value1="${userScreenName}" />

				<execute macro="Search#searchCP">
					<var name="searchTerm" value="user1*" />
				</execute>

				<execute function="AssertTextPresent" locator1="Message#EMPTY_INFO" value1="No users were found." />
			</then>
			<elseif>
				<equals arg1="${userBasicSearch}" arg2="Full Name" />
				<then>
					<var name="fullName"><![CDATA["${userFirstName} ${userLastName}"]]></var>

					<execute macro="Search#searchCP">
						<var name="searchTerm" value="${fullName}" />
					</execute>

					<var name="key_userScreenName" value="${userScreenName}" />

					<execute function="AssertTextEquals" locator1="UsersAndOrganizations#USER_TABLE_NAME" value1="${userName}" />
					<execute function="AssertTextEquals" locator1="UsersAndOrganizations#USER_TABLE_SCREEN_NAME" value1="${userScreenName}" />

					<var name="fullName"><![CDATA["${userFirstName} 1 ${userLastName}"]]></var>

					<execute macro="Search#searchCP">
						<var name="searchTerm" value="${fullName}" />
					</execute>

					<execute function="AssertTextEquals" locator1="Message#EMPTY_INFO" value1="No users were found." />
				</then>
			</elseif>
			<elseif>
				<equals arg1="${userBasicSearch}" arg2="Quotes" />
				<then>
					<var name="quotes"><![CDATA["${userScreenName}"]]></var>

					<execute macro="Search#searchCP">
						<var name="searchTerm" value="${quotes}" />
					</execute>

					<var name="key_userScreenName" value="${userScreenName}" />

					<execute function="AssertTextEquals" locator1="UsersAndOrganizations#USER_TABLE_NAME" value1="${userName}" />
					<execute function="AssertTextEquals" locator1="UsersAndOrganizations#USER_TABLE_SCREEN_NAME" value1="${userScreenName}" />
				</then>
			</elseif>
		</if>
	</command>

	<command name="changePasswordCP">
		<execute macro="UserNavigator#gotoPassword" />

		<if>
			<equals arg1="${userPassword}" arg2="Invalid" />
			<then>
				<execute function="Type" locator1="TextInput#CURRENT_PASSWORD" value1="" />
				<execute function="Type" locator1="TextInput#NEW_PASSWORD" value1="test1" />
				<execute function="Type" locator1="TextInput#ENTER_AGAIN" value1="test1" />

				<execute macro="Button#clickSave" />

				<execute macro="Alert#viewRequiredField" />

				<execute macro="User#logoutPG" />

				<execute macro="User#loginUserPG">
					<var name="password" value="test" />
					<var name="userEmailAddress" value="${userEmailAddress}" />
				</execute>

				<execute macro="User#logoutUserPG" />

				<execute macro="User#loginPG">
					<var name="authenticationMethod" value="${authenticationMethod}" />
					<var name="nodePort" value="${nodePort}" />
					<var name="password" value="test" />
					<var name="resetPassword" value="${resetPassword}" />
					<var name="syntaxCheckingEnabled" value="${syntaxCheckingEnabled}" />
					<var name="userEmailAddress" value="test@liferay.com" />
					<var name="userScreenName" value="${userScreenName}" />
				</execute>
			</then>
			<else>
				<execute function="Type" locator1="TextInput#CURRENT_PASSWORD" value1="test" />
				<execute function="Type" locator1="TextInput#NEW_PASSWORD" value1="test1" />
				<execute function="Type" locator1="TextInput#ENTER_AGAIN" value1="test1" />

				<execute macro="PortletEntry#save" />

				<execute macro="User#logoutPG" />

				<execute macro="User#loginUserPG">
					<var name="password" value="test1" />
					<var name="userEmailAddress" value="${userEmailAddress}" />
				</execute>

				<execute macro="User#logoutUserPG" />

				<execute macro="User#loginPG">
					<var name="authenticationMethod" value="${authenticationMethod}" />
					<var name="nodePort" value="${nodePort}" />
					<var name="password" value="test" />
					<var name="resetPassword" value="${resetPassword}" />
					<var name="syntaxCheckingEnabled" value="${syntaxCheckingEnabled}" />
					<var name="userEmailAddress" value="test@liferay.com" />
					<var name="userScreenName" value="${userScreenName}" />
				</execute>
			</else>
		</if>
	</command>

	<command name="createAccount">
		<execute macro="SignInNavigator#gotoCreateAccount" />

		<execute function="Type" locator1="TextInput#FIRST_NAME" value1="${userFirstName}" />
		<execute function="Type" locator1="TextInput#LAST_NAME" value1="${userLastName}" />
		<execute function="Type" locator1="TextInput#SCREEN_NAME" value1="${userScreenName}" />
		<execute function="Type" locator1="TextInput#EMAIL_ADDRESS" value1="${userEmailAddress}" />

		<execute macro="Button#clickSave" />
	</command>

	<command name="deactivateCP">
		<execute macro="Search#searchCP">
			<var name="searchTerm" value="${userFirstName}" />
		</execute>

		<if>
			<equals arg1="${deactivateType}" arg2="Actions" />
			<then>
				<execute macro="LexiconEntry#gotoEntryMenuItemNoError">
					<var name="menuItem" value="Deactivate" />
					<var name="rowEntry" value="${userFirstName}" />
				</execute>

				<execute function="Confirm" value1="Are you sure you want to deactivate this?" />

				<execute macro="Alert#viewSuccessMessage" />
			</then>
			<else>
				<execute macro="PortletEntry#selectAll" />

				<execute function="ClickNoError" locator1="Icon#DELETE" />

				<execute function="Confirm" value1="Are you sure you want to deactivate the selected users?" />

				<execute macro="Alert#viewSuccessMessage" />

				<execute macro="LexiconEntry#viewNoEntry">
					<var name="rowEntry" value="${userFirstName}" />
				</execute>
			</else>
		</if>
	</command>

	<command name="deleteCP">
		<execute function="Click" locator1="Dropdown#FILTER_AND_ORDER" />

		<execute macro="MenuItem#click">
			<var name="menuItem" value="Inactive" />
		</execute>

		<if>
			<condition function="IsElementPresent" locator1="ContentRow#ENTRY_CONTENT_ROW_1" />
			<then>
				<execute macro="PortletEntry#selectAll" />

				<execute function="ClickNoError" locator1="Icon#DELETE" />

				<execute function="Confirm#waitForConfirmation" value1="Are you sure you want to permanently delete the selected users?" />

				<execute macro="Alert#viewSuccessMessage" />
			</then>
		</if>
	</command>

	<command name="deleteProfilePictureViaMyAccount">
		<execute function="Click" locator1="Button#DELETE" />

		<execute function="Pause" value1="1000" />

		<execute function="Click" locator1="Button#SAVE" />

		<execute macro="Alert#viewSuccessMessage" />

		<execute function="SelectFrame" value1="relative=top" />
	</command>

	<command name="deleteTagViaMyAccount">
		<execute function="Click" locator1="NavListItem#CATEGORIZATION" />

		<if>
			<isset var="userTagList" />
			<then>
				<for list="${userTagList}" param="userTag">
					<var name="key_userTag" value="${userTag}" />

					<execute function="Click" locator1="AssetCategorization#TAG_REMOVE" />
				</for>
			</then>
			<else>
				<var name="key_userTag" value="${userTag}" />

				<execute function="Click" locator1="AssetCategorization#TAG_REMOVE" />
			</else>
		</if>

		<execute function="Click" locator1="Button#SAVE" />

		<execute macro="Alert#viewSuccessMessage" />

		<execute function="SelectFrame" value1="relative=top" />
	</command>

	<command name="editAnnouncementNotificationsViaMyAccount">
		<execute function="AssertClick" locator1="NavListItem#ANNOUNCEMENTS" value1="Announcements" />

		<var name="key_announcementType" value="${announcementType}" />
		<var name="key_notificationType" value="${notificationType}" />

		<execute function="Check" locator1="MyAccount#ANNOUNCEMENTS_NOTIFICATION_CHECKBOX" />

		<execute macro="PortletEntry#save" />

		<execute function="SelectFrame" value1="relative=top" />
	</command>

	<command name="editDetailsViaMyAccount">
		<execute function="AssertElementPresent#assertElementPresent" locator1="TextInput#FIRST_NAME" />

		<if>
			<isset var="userFirstNameEdit" />
			<then>
				<execute function="Type" locator1="TextInput#FIRST_NAME" value1="${userFirstNameEdit}" />
			</then>
		</if>

		<if>
			<isset var="userLastNameEdit" />
			<then>
				<execute function="Type" locator1="TextInput#LAST_NAME" value1="${userLastNameEdit}" />
			</then>
		</if>

		<if>
			<isset var="userMiddleNameEdit" />
			<then>
				<execute function="Type" locator1="TextInput#MIDDLE_NAME" value1="${userMiddleNameEdit}" />
			</then>
		</if>

		<if>
			<isset var="userScreenNameEdit" />
			<then>
				<execute function="Type" locator1="TextInput#SCREEN_NAME" value1="${userScreenNameEdit}" />
			</then>
		</if>

		<execute macro="PortletEntry#save" />
	</command>

	<command name="editDisplaySettingsCP">
		<execute macro="User#searchCP">
			<var name="searchTerm" value="${userScreenName}" />
		</execute>

		<var name="key_rowEntry" value="${userScreenName}" />

		<execute function="Click" locator1="ContentRow#ENTRY_CONTENT_ENTRY_ELLIPSIS" />

		<execute macro="MenuItem#click">
			<var name="menuItem" value="Edit" />
		</execute>

		<execute function="Select" locator1="PortalSettingsDisplaySettings#DEFAULT_LANGUAGE_SELECT" value1="${languageName}" />

		<execute macro="PortletEntry#save" />
	</command>

	<command name="editEmailViaMyAccount">
		<execute macro="Navigator#openURL" />

		<execute macro="ProductMenu#gotoPortlet">
			<var name="category" value="My Account" />
			<var name="panel" value="User" />
			<var name="portlet" value="Account Settings" />
		</execute>

		<execute function="Type" locator1="TextInput#EMAIL_ADDRESS" value1="${userEmailAddress}" />

		<execute macro="PortletEntry#save" />
	</command>

	<command name="editPasswordCP">
		<execute macro="UserNavigator#gotoUser">
			<var name="userScreenName" value="${userScreenName}" />
		</execute>

		<if>
			<not>
				<isset var="newPassword" />
			</not>
			<then>
				<var name="newPassword" value="password" />
			</then>
		</if>

		<execute macro="UserNavigator#gotoPassword" />

		<execute function="Type" locator1="UsersAndOrganizationsEditUser#PASSWORD_NEW_PASSWORD_FIELD" value1="${newPassword}" />
		<execute function="Type" locator1="UsersAndOrganizationsEditUser#PASSWORD_ENTER_AGAIN_FIELD" value1="${newPassword}" />

		<execute macro="PortletEntry#save" />

		<execute macro="User#logoutPG" />

		<execute macro="User#loginPG">
			<var name="authenticationMethod" value="${authenticationMethod}" />
			<var name="nodePort" value="${nodePort}" />
			<var name="password" value="${newPassword}" />
			<var name="resetPassword" value="${resetPassword}" />
			<var name="syntaxCheckingEnabled" value="${syntaxCheckingEnabled}" />
			<var name="userEmailAddress" value="${userEmailAddress}" />
			<var name="userScreenName" value="${userScreenName}" />
		</execute>

		<execute macro="User#logoutPG" />

		<execute macro="User#loginPG">
			<var name="authenticationMethod" value="${authenticationMethod}" />
			<var name="nodePort" value="${nodePort}" />
			<var name="password" value="test" />
			<var name="userEmailAddress" value="test@liferay.com" />
			<var name="userScreenName" value="${userScreenName}" />
		</execute>
	</command>

	<command name="editPasswordInvalidCP">
		<execute macro="UserNavigator#gotoUser">
			<var name="userScreenName" value="${userScreenName}" />
		</execute>

		<if>
			<not>
				<isset var="newPassword" />
			</not>
			<then>
				<var name="newPassword" value="password" />
			</then>
		</if>

		<execute macro="UserNavigator#gotoPassword" />

		<execute function="Type" locator1="UsersAndOrganizationsEditUser#PASSWORD_NEW_PASSWORD_FIELD" value1="${newPassword}" />
		<execute function="Type" locator1="UsersAndOrganizationsEditUser#PASSWORD_ENTER_AGAIN_FIELD" value1="${newPassword}" />

		<execute macro="Button#clickSave" />

		<if>
			<equals arg1="${changeable}" arg2="false" />
			<then>
				<execute macro="Alert#viewRequestFailedToComplete" />

				<execute function="AssertTextEquals#assertPartialText" locator1="Message#ERROR_1" value1="Passwords may not be changed under the current password policy." />
			</then>
			<elseif>
				<equals arg1="${passwordTooShort}" arg2="true" />
				<then>
					<execute macro="Alert#viewRequestFailedToComplete" />

					<execute function="AssertTextEquals#assertPartialText" locator1="Message#ERROR_1" value1="That password is too short. Please make sure your password is at least 6 characters long." />
				</then>
			</elseif>
			<elseif>
				<isset var="minimumNumbers" />
				<then>
					<execute macro="Alert#viewRequestFailedToComplete" />

					<execute function="AssertTextEquals#assertPartialText" locator1="Message#ERROR_1" value1="That password must contain at least ${minimumNumbers} numbers." />
				</then>
			</elseif>
			<elseif>
				<isset var="regex" />
				<then>
					<execute macro="Alert#viewRequestFailedToComplete" />

					<execute function="AssertTextEquals#assertPartialText" locator1="Message#ERROR_1" value1="That password does not comply with the regular expression ${regex}. Please enter a different password." />
				</then>
			</elseif>
			<else>
				<execute macro="Alert#viewRequestFailedToComplete" />

				<execute function="AssertTextEquals#assertPartialText" locator1="Message#ERROR_1" value1="That password is invalid. Please enter in a different password." />
			</else>
		</if>
	</command>

	<command name="editPasswordViaMyAccount">
		<execute macro="UserNavigator#gotoPassword" />

		<execute function="Type" locator1="TextInput#CURRENT_PASSWORD" value1="${currentPassword}" />
		<execute function="Type" locator1="TextInput#NEW_PASSWORD" value1="${newPassword}" />
		<execute function="Type" locator1="TextInput#ENTER_AGAIN" value1="${newPassword}" />

		<execute macro="PortletEntry#save" />
	</command>

	<command name="editUserDisplaySettingsCP">
		<var name="key_userScreenName" value="${userScreenName}" />

		<execute function="Pause" locator1="1000" />

		<execute function="AssertTextEquals" locator1="UsersAndOrganizations#USER_TABLE_SCREEN_NAME" value1="${userScreenName}" />

		<execute function="AssertClick" locator1="UsersAndOrganizations#USER_TABLE_SCREEN_NAME" value1="${userScreenName}" />

		<execute macro="User#editUserDisplaySettingsTimeZonePacific">
			<var name="displaySettingsGreeting" value="${displaySettingsGreeting}" />
		</execute>
	</command>

	<command name="editUserDisplaySettingsTimeZonePacific">
		<execute macro="UserNavigator#gotoDisplaySettings" />

		<if>
			<condition function="IsTextNotEqual" locator1="UsersAndOrganizationsEditUser#DISPLAY_SETTINGS_AMERICA_TIME_ZONE_SELECT" value1="(UTC -07:00) Pacific Daylight Time" />
			<then>
				<execute function="Select" locator1="UsersAndOrganizationsEditUser#DISPLAY_SETTINGS_TIME_ZONE_SELECT" value1="(UTC -08:00) Pacific Standard Time" />
			</then>
			<else>
				<execute function="Select" locator1="UsersAndOrganizationsEditUser#DISPLAY_SETTINGS_TIME_ZONE_SELECT" value1="(UTC -07:00) Pacific Daylight Time" />
			</else>
		</if>

		<execute function="Type" locator1="UsersAndOrganizationsEditUser#DISPLAY_SETTINGS_GREETING_FIELD" value1="${displaySettingsGreeting}" />

		<execute macro="PortletEntry#save" />

		<execute macro="UserNavigator#gotoDisplaySettings" />

		<if>
			<condition function="IsTextNotEqual" locator1="UsersAndOrganizationsEditUser#DISPLAY_SETTINGS_AMERICA_TIME_ZONE_SELECT" value1="(UTC -07:00) Pacific Daylight Time" />
			<then>
				<execute function="AssertSelectedLabel" locator1="UsersAndOrganizationsEditUser#DISPLAY_SETTINGS_TIME_ZONE_SELECT" value1="(UTC -08:00) Pacific Standard Time" />
			</then>
			<else>
				<execute function="AssertSelectedLabel" locator1="UsersAndOrganizationsEditUser#DISPLAY_SETTINGS_TIME_ZONE_SELECT" value1="(UTC -07:00) Pacific Daylight Time" />
			</else>
		</if>

		<execute function="AssertTextEquals" locator1="UsersAndOrganizationsEditUser#DISPLAY_SETTINGS_GREETING_FIELD" value1="${displaySettingsGreeting}" />
	</command>

	<command name="editUserGenderCP">
		<execute macro="LexiconEntry#gotoEntry">
			<var name="rowEntry" value="${userName}" />
		</execute>

		<execute function="Select" locator1="UsersAndOrganizationsEditUser#DETAILS_GENDER_SELECT" value1="${userGender}" />

		<execute macro="PortletEntry#save" />
	</command>

	<command name="editUserJobTitleCP">
		<execute macro="LexiconEntry#gotoEntry">
			<var name="rowEntry" value="${userName}" />
		</execute>

		<execute function="Type" locator1="UsersAndOrganizationsEditUser#DETAILS_JOB_TITLE_FIELD" value1="${userJobTitle}" />

		<execute macro="PortletEntry#save" />
	</command>

	<command name="editUserMiddleNameCP">
		<var name="key_userScreenName" value="${userScreenName}" />

		<execute function="Pause" locator1="1000" />

		<execute function="AssertTextEquals" locator1="UsersAndOrganizations#USER_TABLE_SCREEN_NAME" value1="${userScreenName}" />

		<execute function="AssertClick" locator1="UsersAndOrganizations#USER_TABLE_SCREEN_NAME" value1="${userScreenName}" />

		<execute function="Type" locator1="UsersAndOrganizationsEditUser#DETAILS_MIDDLE_NAME_FIELD" value1="${userMiddleName}" />

		<execute macro="PortletEntry#save" />
	</command>

	<command name="editUserOrganizationCP">
		<execute macro="UserNavigator#gotoUser">
			<var name="userScreenName" value="${userScreenName}" />
		</execute>

		<execute macro="UserNavigator#gotoOrganizations" />

		<var name="key_orgName" value="${orgName}" />

		<execute function="AssertClick" locator1="UsersAndOrganizationsEditUser#ORGANIZATIONS_SELECT_LINK" value1="Select" />

		<execute function="SelectFrame" locator1="UsersAndOrganizationsSelectOrganization#SELECT_ORGANIZATION_IFRAME" />

		<execute macro="Search#searchCP">
			<var name="searchTerm" value="${orgName}" />
		</execute>

		<execute function="AssertTextEquals" locator1="UsersAndOrganizationsSelectOrganization#ORGANIZATION_TABLE_NAME" value1="${orgName}" />

		<execute function="AssertClick" locator1="UsersAndOrganizationsSelectOrganization#ORGANIZATION_TABLE_CHOOSE_BUTTON" value1="Choose" />

		<execute function="SelectFrame" value1="relative=top" />

		<execute function="AssertTextEquals" locator1="UsersAndOrganizationsEditUser#ORGANIZATIONS_TABLE_NAME" value1="${orgName}" />

		<execute macro="PortletEntry#save" />
	</command>

	<command name="editUserSiteCP">
		<execute macro="UserNavigator#gotoUser">
			<var name="userScreenName" value="${userScreenName}" />
		</execute>

		<execute macro="UserNavigator#gotoMemberships" />

		<var name="key_siteName" value="${siteName}" />

		<execute function="AssertClick#assertTextClickCaseInsensitive" locator1="UsersAndOrganizationsEditUser#SITES_SELECT_LINK" value1="SELECT" />

		<execute function="SelectFrame" locator1="IFrame#SELECT_USER_SITES" />

		<execute function="Type" locator1="TextInput#SITE_SEARCH_KEYWORDS" value1="${siteName}" />

		<execute function="KeyPress" locator1="TextInput#SEARCH" value1="\RETURN" />

		<execute function="AssertTextEquals#assertPartialText" locator1="UsersAndOrganizationsEditUser#SITES_TABLE_NAME" value1="${siteName}" />

		<execute function="Click" locator1="SitesSelectSite#SITES_TABLE_CHOOSE_SITE_LINK" />

		<execute function="SelectFrame" value1="relative=top" />

		<execute function="AssertTextEquals#assertPartialText" locator1="UsersAndOrganizationsEditUser#SITES_TABLE_NAME" value1="${siteName}" />

		<execute macro="PortletEntry#save" />
	</command>

	<command name="editUserSuffixCP">
		<execute macro="LexiconEntry#gotoEntry">
			<var name="rowEntry" value="${userName}" />
		</execute>

		<execute function="Select" locator1="UsersAndOrganizationsEditUser#DETAILS_SUFFIX_SELECT" value1="${userSuffix}" />

		<execute macro="PortletEntry#save" />
	</command>

	<command name="firstLoginPG" summary="Log into Liferay Portal as '${userEmailAddress}' using the password '${password}'; if not logged in as '${userEmailAddress}', then log out first">
		<echo message="Checking to see if TCat is enabled..." />

		<var method="selenium#isTCatEnabled()" name="tcatEnabled" />

		<if>
			<equals arg1="${tcatEnabled}" arg2="true" />
			<then>
				<execute macro="TCat#deployLiferayPortalWar" />
			</then>
		</if>

		<if>
			<isset var="virtualHostsURL" />
			<then>
				<execute macro="Navigator#openSpecificURL">
					<var name="url" value="${virtualHostsURL}" />
				</execute>
			</then>
			<else>
				<execute macro="Navigator#openURL" />
			</else>
		</if>

		<if>
			<condition function="IsElementPresent" locator1="UserBar#USER_AVATAR_IMAGE" />
			<then>
				<execute macro="User#logoutPG" />
				<execute macro="User#loginPG">
					<var name="userEmailAddress" value="${userEmailAddress}" />
				</execute>
			</then>
			<else>
				<execute macro="User#loginPG">
					<var name="localization" value="${localization}" />
					<var name="samlEnabled" value="${samlEnabled}" />
					<var name="setupWizardEnabled" value="${setupWizardEnabled}" />
					<var name="specificURL" value="${virtualHostsURL}" />
					<var name="userEmailAddress" value="${userEmailAddress}" />
				</execute>
			</else>
		</if>
	</command>

	<command name="forgotPasswordSendResetLink">
		<execute macro="SignInNavigator#gotoForgotPassword" />

		<execute function="Type" locator1="TextInput#EMAIL_ADDRESS" value1="${userEmailAddress}" />

		<execute macro="Button#clickNext" />

		<execute function="AssertClick" locator1="Button#SEND_PASSWORD_RESET_LINK" value1="Send Password Reset Link" />

		<execute macro="Alert#viewSuccessMessageText">
			<var name="successMessage" value="Your password was sent to the provided email address." />
		</execute>
	</command>

	<command name="gotoEditCP">
		<var name="key_userScreenName" value="${userScreenName}" />

		<execute function="AssertClick" locator1="UsersAndOrganizations#USER_TABLE_SCREEN_NAME" value1="${userScreenName}" />

		<execute function="AssertTextEquals#assertPartialText" locator1="Portlet#HEADER" value1="Edit User" />
	</command>

	<command name="impersonateCP">
		<execute function="Pause" locator1="1000" />

		<execute macro="Search#searchCP">
			<var name="searchTerm" value="${userScreenName}" />
		</execute>

		<var name="key_rowEntry" value="${userScreenName}" />

		<execute function="Click" locator1="ContentRow#ENTRY_CONTENT_ENTRY_ELLIPSIS" />

		<execute macro="MenuItem#click">
			<var name="menuItem" value="Impersonate User" />
		</execute>

		<execute function="SelectWindow" locator1="title=Welcome - ${siteName}" />

		<execute function="AssertElementPresent" locator1="UserBar#USER_AVATAR_IMAGE" />

		<execute function="Click" locator1="UserBar#USER_AVATAR_IMAGE" />

		<execute function="AssertElementPresent" locator1="ProductMenu#PANEL_EXPANDED">
			<var name="key_panel" value="user" />
		</execute>
	</command>

	<command name="loginLocalizationPG">
		<if>
			<equals arg1="${localization}" arg2="JA" />
			<then>
				<var name="signIn" value="" />
			</then>
			<elseif>
				<equals arg1="${localization}" arg2="ZH" />
				<then>
					<var name="signIn" value="" />
				</then>
			</elseif>
			<elseif>
				<equals arg1="${localization}" arg2="ES" />
				<then>
					<var name="signIn" value="Acceder" />
				</then>
			</elseif>
			<else>
				<var name="signIn" value="Sign In" />
			</else>
		</if>

		<execute function="AssertClick" locator1="UserBar#USER_SIGN_IN" value1="${signIn}" />
	</command>

	<command name="loginPG" summary="Log into Liferay Portal as '${userEmailAddress}' using the password '${password}'">
		<if>
			<isset var="nodePort" />
			<then>
				<execute macro="Navigator#openSpecificURL">
					<var name="url" value="http://localhost:${nodePort}" />
				</execute>
			</then>
			<elseif>
				<isset var="specificURL" />
				<then>
					<execute macro="Navigator#openSpecificURL">
						<var name="url" value="${specificURL}" />
					</execute>
				</then>
			</elseif>
			<else>
				<execute macro="Navigator#openURL" />
			</else>
		</if>

		<if>
			<condition function="IsElementPresent" locator1="Message#PORTAL_LOCALIZATION" />
			<then>
				<execute macro="Alert#closePortalLocalizationWarning" />
			</then>
		</if>

		<if>
			<not>
				<equals arg1="${samlEnabled}" arg2="true" />
			</not>
			<then>
				<execute macro="User#loginLocalizationPG">
					<var name="localization" value="${localization}" />
				</execute>
			</then>
		</if>

		<if>
			<and>
				<isset var="authenticationMethod" />
				<equals arg1="${authenticationMethod}" arg2="By Screen Name" />
			</and>
			<then>
				<execute function="Type" locator1="TextInput#SCREEN_NAME" value1="${userScreenName}" />
			</then>
			<else>
				<execute function="Type" locator1="TextInput#EMAIL_ADDRESS" value1="${userEmailAddress}" />
			</else>
		</if>

		<execute function="Type" locator1="TextInput#PASSWORD" value1="${password}" />

		<if>
			<and>
				<isset var="rememberMeChecked" />
				<equals arg1="${rememberMeChecked}" arg2="true" />
			</and>
			<then>
				<execute function="Check" locator1="Checkbox#REMEMBER_ME" />
			</then>
		</if>

		<take-screenshot />

		<execute macro="Button#click">
			<var name="button" value="Sign In" />
		</execute>

		<execute macro="Button#viewNotPresent">
			<var name="button" value="Sign In" />
		</execute>

		<execute macro="User#acceptEndUserLicenseAgreement" />

		<execute macro="User#resetPassword">
			<var name="resetPassword" value="${resetPassword}" />
			<var name="setupWizardEnabled" value="${setupWizardEnabled}" />
			<var name="syntaxCheckingEnabled" value="${syntaxCheckingEnabled}" />
		</execute>

		<execute macro="User#answerPasswordReminder" />

		<execute function="AssertElementPresent" locator1="UserBar#USER_AVATAR_IMAGE" />
	</command>

	<command name="loginUserInvalidPG">
		<execute macro="Navigator#openURL" />

		<var name="count" value="0" />

		<if>
			<not>
				<isset var="loginAttempts" />
			</not>
			<then>
				<var name="loginAttempts" value="1" />
			</then>
		</if>

		<if>
			<not>
				<isset var="maxLoginAttempts" />
			</not>
			<then>
				<var name="maxLoginAttempts" value="0" />
			</then>
		</if>

		<while>
			<not>
				<equals arg1="${count}" arg2="${loginAttempts}" />
			</not>
			<then>
				<var method="MathUtil#sum('${count}', '1')" name="count" />

				<execute macro="User#_login">
					<var name="password" value="${password}" />
					<var name="userEmailAddress" value="${userEmailAddress}" />
				</execute>

				<if>
					<equals arg1="${count}" arg2="${maximumFailure}" />
					<then>
						<execute function="AssertTextEquals#assertPartialText" locator1="Message#ERROR_1" value1="This account is locked. Please contact an administrator to have this account unlocked." />
					</then>
					<else>
						<execute function="AssertTextEquals#assertPartialText" locator1="Message#ERROR_1" value1="Authentication failed. Please try again." />
					</else>
				</if>
			</then>
		</while>
	</command>

	<command name="loginUserPG">
		<description message="Log into Liferay Portal as ${userEmailAddress} using the password ${password}." />

		<execute macro="Navigator#openURL" />

		<execute macro="User#_login">
			<var name="password" value="${password}" />
			<var name="userEmailAddress" value="${userEmailAddress}" />
		</execute>

		<execute function="AssertElementPresent" locator1="UserBar#USER_AVATAR_IMAGE" />
	</command>

	<command name="loginUserWithCASEnabledPG">
		<description message="Log into Liferay Portal as ${userEmailAddress} using the password ${password} with CAS authentication enabled." />

		<execute macro="Navigator#openURL" />

		<execute function="AssertClick" locator1="UserBar#USER_SIGN_IN" value1="Sign In" />

		<execute function="Type" locator1="CAS#NETID_FIELD" value1="${userScreenName}" />
		<execute function="Type" locator1="CAS#PASSWORD_FIELD" value1="${userScreenName}" />

		<execute function="AssertClick" locator1="CAS#LOGIN_BUTTON" value1="LOGIN" />

		<execute function="AssertElementPresent" locator1="UserBar#USER_AVATAR_IMAGE" />
	</command>

	<command name="loginUserWithFacebookSSOEnabledPG">
		<description message="Log into Facebook as ${facebookEmail} using the password ${facebookPassword}." />

		<execute macro="Navigator#openURL" />

		<execute function="AssertClick" locator1="UserBar#USER_SIGN_IN" value1="Sign In" />

		<execute function="AssertElementPresent" locator1="Icon#FACEBOOK" />

		<execute function="AssertClick" locator1="Link#FACEBOOK" value1="Facebook" />

		<execute function="SelectWindow" locator1="title=Log into Facebook | Facebook" />

		<execute function="Type" locator1="FacebookLogin#LOGIN_EMAIL_FIELD" value1="${facebookEmail}" />
		<execute function="Type" locator1="FacebookLogin#LOGIN_PASSWORD_FIELD" value1="${facebookPassword}" />

		<execute function="Click" locator1="FacebookLogin#LOGIN_BUTTON" />

		<execute function="SelectWindow#selectWindowTopNoSPARefresh" />

		<if>
			<condition function="IsElementPresent#pauseIsElementPresent" locator1="TextInput#EMAIL_ADDRESS" />
			<then>
				<execute function="SelectWindow#selectWindowNoSPARefresh" locator1="title=Terms of Use" />
				<if>
					<condition function="IsElementPresent#pauseIsElementPresent" locator1="Button#I_AGREE" value1="I Agree" />
					<then>
						<execute function="AssertClick" locator1="Button#I_AGREE" value1="I Agree" />
					</then>
				</if>

				<if>
					<condition function="IsElementPresent#pauseIsElementPresent" locator1="TextInput#PASSWORD" />
					<then>
						<if>
							<and>
								<isset var="syntaxCheckingEnabled" />
								<equals arg1="${syntaxCheckingEnabled}" arg2="true" />
							</and>
							<then>
								<execute function="Type" locator1="TextInput#PASSWORD" value1="${resetPassword}" />
								<execute function="Type" locator1="TextInput#ENTER_AGAIN" value1="${resetPassword}" />
							</then>
							<else>
								<execute function="Type" locator1="TextInput#PASSWORD" value1="test" />
								<execute function="Type" locator1="TextInput#ENTER_AGAIN" value1="test" />
							</else>
						</if>

						<execute macro="Button#clickSave" />
					</then>
				</if>

				<if>
					<condition function="IsElementPresent#pauseIsElementPresent" locator1="TextInput#ANSWER" />
					<then>
						<execute function="Type" locator1="TextInput#ANSWER" value1="test" />

						<execute function="KeyPress" locator1="TextInput#ANSWER" value1="\RETURN" />
					</then>
				</if>
			</then>
		</if>

		<execute function="SelectWindow#selectWindowNoSPARefresh" locator1="title=Welcome - ${siteName}" />

		<execute function="AssertElementPresent" locator1="UserBar#USER_AVATAR_IMAGE" />
	</command>

	<command name="loginUserWithGoogleSSOEnabledPG">
		<execute macro="GoogleLogin#accountSignIn">
			<var name="userEmailAddress" value="${userEmailAddress}" />
			<var name="userPassword" value="${userPassword}" />
		</execute>

		<execute function="SelectWindow#selectWindowTopNoSPARefresh" />

		<if>
			<condition function="IsElementPresent#pauseIsElementPresent" locator1="TextInput#EMAIL_ADDRESS" />
			<then>
				<execute function="SelectWindow#selectWindowNoSPARefresh" locator1="title=Terms of Use" />

				<execute macro="GoogleLogin#acceptConditions" />
			</then>
		</if>

		<execute function="AssertElementPresent" locator1="UserBar#USER_AVATAR_IMAGE" />
	</command>

	<command name="loginUserWithOpenIDConnectEnabledPG">
		<execute macro="OpenIDConnect#accountSignIn">
			<var name="userEmailAddress" value="${userEmailAddress}" />
			<var name="userPassword" value="${userPassword}" />
		</execute>

		<execute macro="OpenIDConnect#acceptConditions" />

		<execute function="AssertElementPresent" locator1="UserBar#USER_AVATAR_IMAGE" />
	</command>

	<command name="loginUserWithOpenIDEnabledPG">
		<description message="Log into Liferay Portal as ${userEmailAddress} using the password ${password} with OpenID authentication enabled." />

		<execute macro="Navigator#openURL" />

		<execute function="AssertClick" locator1="UserBar#USER_SIGN_IN" value1="Sign In" />

		<execute function="AssertClick" locator1="Link#OPENID" value1="OpenID" />

		<execute function="Type" locator1="SignInOpenID#OPENID_FIELD" value1="http://${openIDUsername}.openid.org.cn" />

		<execute function="Click" locator1="Button#SIGN_IN" />

		<execute function="Type" locator1="OpenIDLogin#LOGIN_OPENID_FIELD" value1="${openIDUsername}" />
		<execute function="Type" locator1="OpenIDLogin#LOGIN_PASSWORD_FIELD" value1="${openIDPassword}" />

		<execute function="AssertClick" locator1="OpenIDLogin#LOGIN_BUTTON" value1="Login" />

		<if>
			<condition function="IsElementPresent" locator1="OpenIDLogin#LOGIN_ALLOW_ONCE_BUTTON" />
			<then>
				<var name="key_userName" value="${userName}" />

				<execute function="Click" locator1="OpenIDLogin#LOGIN_PERSONA" />

				<execute function="AssertClick" locator1="OpenIDLogin#LOGIN_ALLOW_ONCE_BUTTON" value1="Allow Once" />
			</then>
		</if>

		<if>
			<condition function="IsElementPresent#pauseIsElementPresent" locator1="Button#I_AGREE" value1="I Agree" />
			<then>
				<execute function="AssertClick" locator1="Button#I_AGREE" value1="I Agree" />
			</then>
		</if>

		<if>
			<condition function="IsElementPresent#pauseIsElementPresent" locator1="TextInput#PASSWORD" />
			<then>
				<if>
					<and>
						<isset var="syntaxCheckingEnabled" />
						<equals arg1="${syntaxCheckingEnabled}" arg2="true" />
					</and>
					<then>
						<execute function="Type" locator1="TextInput#PASSWORD" value1="${resetPassword}" />
						<execute function="Type" locator1="TextInput#ENTER_AGAIN" value1="${resetPassword}" />
					</then>
					<else>
						<execute function="Type" locator1="TextInput#PASSWORD" value1="test" />
						<execute function="Type" locator1="TextInput#ENTER_AGAIN" value1="test" />
					</else>
				</if>

				<execute macro="Button#clickSave" />
			</then>
		</if>

		<if>
			<condition function="IsElementPresent#pauseIsElementPresent" locator1="TextInput#ANSWER" />
			<then>
				<execute function="Type" locator1="TextInput#ANSWER" value1="test" />

				<execute macro="Button#clickSave" />
			</then>
		</if>

		<execute function="AssertElementPresent" locator1="UserBar#USER_AVATAR_IMAGE" />
	</command>

	<command name="loginUserWithOpenSSOEnabledPG">
		<description message="Log into OpenAM as ${userScreenName} using the password ${password}." />

		<execute macro="Navigator#openSpecificURL">
			<var name="url" value="${hostsURL}" />
		</execute>

		<execute function="AssertClick" locator1="UserBar#USER_SIGN_IN" value1="Sign In" />

		<execute function="Type" locator1="OpenAM#USER_NAME" value1="${userScreenName}" />
		<execute function="Type" locator1="OpenAM#PASSWORD" value1="${password}" />

		<execute function="Click" locator1="OpenAM#LOG_IN" />

		<execute function="AssertElementPresent" locator1="UserBar#USER_AVATAR_IMAGE" />
	</command>

	<command name="logoutAndLoginPG">
		<execute macro="Navigator#openURL" />

		<execute macro="ProductMenuHelper#expandPanel">
			<var name="panel" value="User" />
		</execute>

		<if>
			<condition function="IsTextNotEqual" locator1="ControlMenu#USER_NAME" value1="${userLoginFullName}" />
			<then>
				<execute macro="User#logoutPG" />

				<execute macro="User#loginPG">
					<var name="authenticationMethod" value="${authenticationMethod}" />
					<var name="nodePort" value="${nodePort}" />
					<var name="userEmailAddress" value="${userLoginEmailAddress}" />
					<var name="userScreenName" value="${userScreenName}" />
				</execute>
			</then>
		</if>
	</command>

	<command name="logoutPG">
		<description message="Log out of Liferay Portal." />

		<if>
			<isset var="nodePort" />
			<then>
				<execute macro="Navigator#openSpecificURL">
					<var name="url" value="http://localhost:${nodePort}" />
				</execute>
			</then>
			<else>
				<if>
					<isset var="specificURL" />
					<then>
						<execute macro="Navigator#openSpecificURL">
							<var name="url" value="${specificURL}" />
						</execute>
					</then>
					<else>
						<execute macro="Navigator#openURL" />
					</else>
				</if>
			</else>
		</if>

		<execute macro="UserBar#signOut" />
	</command>

	<command name="logoutUserPG">
		<description message="Log out of Liferay Portal." />

		<execute macro="Navigator#openURL" />

		<execute macro="UserBar#signOut" />
	</command>

	<command name="resetPassword">
		<if>
			<condition function="IsElementPresent#pauseIsElementPresent" locator1="TextInput#PASSWORD" />
			<then>
				<if>
					<and>
						<isset var="syntaxCheckingEnabled" />
						<equals arg1="${syntaxCheckingEnabled}" arg2="true" />
					</and>
					<then>
						<execute function="Type" locator1="TextInput#PASSWORD" value1="${resetPassword}" />
						<execute function="Type" locator1="TextInput#ENTER_AGAIN" value1="${resetPassword}" />
					</then>
					<else>
						<if>
							<and>
								<isset var="setupWizardEnabled" />
								<equals arg1="${setupWizardEnabled}" arg2="true" />
							</and>
							<then>
								<execute function="Type" locator1="TextInput#PASSWORD" value1="test2" />
								<execute function="Type" locator1="TextInput#ENTER_AGAIN" value1="test2" />
							</then>
							<else>
								<execute function="Type" locator1="TextInput#PASSWORD" value1="test" />
								<execute function="Type" locator1="TextInput#ENTER_AGAIN" value1="test" />
							</else>
						</if>
					</else>
				</if>

				<execute macro="Button#clickSave" />

				<execute function="AssertElementNotPresent" locator1="TextInput#ENTER_AGAIN" />
			</then>
		</if>
	</command>

	<command name="searchCP">
		<execute function="Pause" locator1="5000" />

		<execute macro="Search#searchCP">
			<var name="searchTerm" value="${searchTerm}" />
		</execute>

		<execute function="Pause" locator1="5000" />
	</command>

	<command name="setPasswordByResetLink">
		<execute function="Type" locator1="UsersAndOrganizationsEditUser#PASSWORD_NEW_PASSWORD_FIELD" value1="${newPassword1}" />
		<execute function="Type" locator1="UsersAndOrganizationsEditUser#PASSWORD_ENTER_AGAIN_FIELD" value1="${newPassword2}" />

		<execute macro="Button#clickSave" />

		<if>
			<not>
				<equals arg1="${newPassword1}" arg2="${newPassword2}" />
			</not>
			<then>
				<execute function="AssertTextEquals#assertPartialText" locator1="TextInput#ALERT" value1="Please enter the same value again." />
			</then>
			<elseif>
				<not>
					<isset var="invalidateLength" />
				</not>
				<then>
					<execute macro="User#acceptEndUserLicenseAgreement" />

					<execute macro="User#answerPasswordReminder" />
				</then>
			</elseif>
			<elseif>
				<equals arg1="${invalidateLength}" arg2="Short" />
				<then>
					<execute function="AssertTextEquals#assertPartialText" locator1="Message#ERROR" value1="That password is too short. Please make sure your password is at least 6 characters long." />
				</then>
			</elseif>
		</if>
	</command>

	<command name="signInPG">
		<execute function="AssertClick" locator1="UserBar#USER_SIGN_IN" value1="Sign In" />

		<execute function="Type" locator1="TextInput#EMAIL_ADDRESS" value1="${userEmailAddress}" />
		<execute function="Type" locator1="TextInput#PASSWORD" value1="${emailPassword}" />
		<execute function="Check" locator1="Checkbox#REMEMBER_ME" />

		<execute function="AssertClick" locator1="Button#SIGN_IN" value1="Sign In" />

		<if>
			<condition function="IsElementPresent#pauseIsElementPresent" locator1="Button#I_AGREE" value1="I Agree" />
			<then>
				<execute function="AssertClick" locator1="Button#I_AGREE" value1="I Agree" />
			</then>
		</if>

		<execute function="AssertTextEquals" locator1="Message#INFO" value1="Please enter your verification code." />

		<execute function="Type" locator1="SignInCreateAccount#EMAIL_VERIFICATION_CODE_FIELD" value1="${emailVerification}" />

		<execute function="AssertClick" locator1="Button#VERIFY" value1="Verify" />

		<if>
			<condition function="IsElementPresent#pauseIsElementPresent" locator1="TextInput#PASSWORD" />
			<then>
				<if>
					<and>
						<isset var="syntaxCheckingEnabled" />
						<equals arg1="${syntaxCheckingEnabled}" arg2="true" />
					</and>
					<then>
						<execute function="Type" locator1="TextInput#PASSWORD" value1="${resetPassword}" />
						<execute function="Type" locator1="TextInput#ENTER_AGAIN" value1="${resetPassword}" />
					</then>
					<else>
						<execute function="Type" locator1="TextInput#PASSWORD" value1="test" />
						<execute function="Type" locator1="TextInput#ENTER_AGAIN" value1="test" />
					</else>
				</if>

				<execute macro="Button#clickSave" />
			</then>
		</if>

		<if>
			<condition function="IsElementPresent#pauseIsElementPresent" locator1="TextInput#ANSWER" />
			<then>
				<execute function="Type" locator1="TextInput#ANSWER" value1="test" />

				<execute macro="Button#clickSave" />
			</then>
		</if>
	</command>

	<command name="tearDownCP">
		<execute macro="ProductMenu#gotoPortlet">
			<var name="category" value="Users" />
			<var name="panel" value="Control Panel" />
			<var name="portlet" value="Users and Organizations" />
		</execute>

		<execute function="Click" locator1="Dropdown#FILTER_AND_ORDER" />

		<execute macro="MenuItem#click">
			<var name="menuItem" value="Active" />
		</execute>

		<if>
			<condition function="IsElementPresent" locator1="ContentRow#ENTRY_CONTENT_ROW_1" />
			<then>
				<execute macro="PortletEntry#selectAll" />

				<execute function="AssertClickNoError" locator1="Button#DEACTIVATE" value1="Deactivate" />

				<execute function="Confirm" value1="Are you sure you want to deactivate the selected users?" />

				<execute macro="Alert#viewSuccessMessage" />
			</then>
		</if>

		<execute function="Click" locator1="Dropdown#FILTER_AND_ORDER" />

		<execute macro="MenuItem#click">
			<var name="menuItem" value="Inactive" />
		</execute>

		<if>
			<condition function="IsElementPresent" locator1="ContentRow#ENTRY_CONTENT_ROW_1" />
			<then>
				<execute macro="PortletEntry#selectAll" />

				<execute function="Click" locator1="Icon#DELETE" />

				<execute function="Confirm" value1="Are you sure you want to permanently delete the selected users?" />

				<execute macro="Alert#viewSuccessMessage" />
			</then>
		</if>
	</command>

	<command name="tearDownSpecificUser">
		<execute macro="ProductMenu#gotoPortlet">
			<var name="category" value="Users" />
			<var name="panel" value="Control Panel" />
			<var name="portlet" value="Users and Organizations" />
		</execute>

		<execute function="Click" locator1="Dropdown#FILTER_AND_ORDER" />

		<execute macro="MenuItem#click">
			<var name="menuItem" value="Active" />
		</execute>

		<execute macro="User#searchCP">
			<var name="searchTerm" value="${userScreenName}" />
		</execute>

		<if>
			<condition function="IsElementPresent" locator1="ContentRow#ENTRY_CONTENT_ROW_1" />
			<then>
				<execute macro="PortletEntry#selectAll" />

				<execute function="ClickNoError" locator1="Icon#MOVE_TO_RECYCLE_BIN" />

				<execute function="Confirm" value1="Are you sure you want to deactivate the selected users?" />

				<execute macro="Alert#viewSuccessMessage" />
			</then>
		</if>

		<execute function="Click" locator1="Dropdown#FILTER_AND_ORDER" />

		<execute macro="MenuItem#click">
			<var name="menuItem" value="Inactive" />
		</execute>

		<if>
			<condition function="IsElementPresent" locator1="ContentRow#ENTRY_CONTENT_ROW_1" />
			<then>
				<execute macro="PortletEntry#selectAll" />

				<execute function="ClickNoError" locator1="Icon#MOVE_TO_RECYCLE_BIN" />

				<execute function="Confirm" value1="Are you sure you want to permanently delete the selected users?" />

				<execute macro="Alert#viewSuccessMessage" />
			</then>
		</if>
	</command>

	<command name="unassignRegularRoleCP">
		<execute macro="UserNavigator#gotoUser">
			<var name="userScreenName" value="${userScreenName}" />
		</execute>

		<execute macro="UserNavigator#gotoRoles" />

		<var name="key_roleTitle" value="${roleTitle}" />

		<execute function="Click" locator1="UsersAndOrganizationsEditUser#ROLES_REGULAR_ROLES_TABLE_REMOVE_LINK" />

		<execute function="AssertElementNotPresent" locator1="UsersAndOrganizationsEditUser#ROLES_REGULAR_ROLES_TABLE_TITLE" />

		<execute macro="PortletEntry#save" />
	</command>

	<command name="unlockUserAccount">
		<execute function="Pause" locator1="1000" />

		<var name="key_userScreenName" value="${userScreenName}" />

		<execute function="AssertTextEquals" locator1="UsersAndOrganizations#USER_TABLE_SCREEN_NAME" value1="${userScreenName}" />

		<execute function="AssertClick" locator1="UsersAndOrganizations#USER_TABLE_SCREEN_NAME" value1="${userScreenName}" />

		<execute function="AssertTextEquals" locator1="Message#ERROR_3" value1="This user account has been locked due to excessive failed login attempts." />

		<execute function="AssertClick" locator1="Button#UNLOCK" value1="Unlock" />

		<execute macro="Alert#viewSuccessMessage" />
	</command>

	<command name="viewCaptchaPG">
		<if>
			<equals arg1="${captchaType}" arg2="captcha" />
			<then>
				<execute function="AssertElementPresent#assertElementPresent" locator1="SignInCreateAccount#CAPTCHA_IMAGE" />
			</then>
			<elseif>
				<equals arg1="${captchaType}" arg2="recaptcha" />
				<then>
					<execute function="SelectFrame" locator1="IFrame#RECAPTCHA" />

					<execute function="AssertElementPresent#assertElementPresent" locator1="SignInCreateAccount#RECAPTCHA_LABEL" />
				</then>
			</elseif>
		</if>
	</command>

	<command name="viewCP">
		<if>
			<equals arg1="${userEmailAddressVariation}" arg2="At" />
			<then>
				<execute function="Pause" locator1="1000" />

				<execute macro="Search#searchCP">
					<var name="searchTerm" value="${userEmailAddress}" />
				</execute>

				<execute function="AssertTextEquals" locator1="Message#EMPTY_INFO" value1="No users were found." />
			</then>
			<elseif>
				<equals arg1="${userEmailAddressVariation}" arg2="Period" />
				<then>
					<execute function="Pause" locator1="1000" />

					<execute macro="Search#searchCP">
						<var name="searchTerm" value="${userEmailAddress}" />
					</execute>

					<execute function="AssertTextEquals" locator1="Message#EMPTY_INFO" value1="No users were found." />
				</then>
			</elseif>
			<elseif>
				<equals arg1="${userScreenNameVariation}" arg2="Invalid" />
				<then>
					<execute function="Pause" locator1="1000" />

					<execute macro="Search#searchCP">
						<var name="searchTerm" value="${userScreenName}" />
					</execute>

					<execute function="AssertTextEquals" locator1="Message#EMPTY_INFO" value1="No users were found." />
				</then>
			</elseif>
			<else>
				<var name="key_userScreenName" value="${userScreenName}" />

				<execute function="Pause" locator1="1000" />

				<execute function="AssertTextEquals" locator1="UsersAndOrganizations#USER_TABLE_NAME" value1="${userFirstName} ${userLastName}" />
				<execute function="AssertTextEquals" locator1="UsersAndOrganizations#USER_TABLE_SCREEN_NAME" value1="${userScreenName}" />

				<execute function="AssertClick" locator1="UsersAndOrganizations#USER_TABLE_NAME" value1="${userFirstName} ${userLastName}" />

				<execute function="AssertTextEquals" locator1="UsersAndOrganizationsEditUser#DETAILS_SCREEN_NAME_FIELD" value1="${userScreenName}" />
				<execute function="AssertTextEquals" locator1="UsersAndOrganizationsEditUser#DETAILS_EMAIL_ADDRESS_FIELD" value1="${userEmailAddress}" />
				<execute function="AssertTextEquals" locator1="UsersAndOrganizationsEditUser#DETAILS_FIRST_NAME_FIELD" value1="${userFirstName}" />
				<execute function="AssertTextEquals" locator1="UsersAndOrganizationsEditUser#DETAILS_LAST_NAME_FIELD" value1="${userLastName}" />
			</else>
		</if>
	</command>

	<command name="viewLoggedInPG">
		<execute macro="ProductMenuHelper#expandPanel">
			<var name="panel" value="Control Panel" />
		</execute>

		<if>
			<equals arg1="${authenticationMethod}" arg2="By Screen Name" />
			<then>
				<execute function="AssertElementNotPresent" locator1="TextInput#SCREEN_NAME" />
			</then>
			<else>
				<execute function="AssertElementNotPresent" locator1="TextInput#EMAIL_ADDRESS" />
			</else>
		</if>

		<execute function="AssertElementNotPresent" locator1="TextInput#PASSWORD" />
		<execute function="AssertElementNotPresent" locator1="Checkbox#REMEMBER_ME" />
		<execute function="AssertElementNotPresent" locator1="Button#SIGN_IN" />

		<execute function="AssertTextEquals" locator1="ControlMenu#USER_NAME" value1="${userFirstName}" />
	</command>

	<command name="viewLoggedOutPG">
		<execute function="AssertElementNotPresent" locator1="UserBar#USER_AVATAR_IMAGE" />
		<execute function="AssertElementNotPresent" locator1="ControlMenu#ADD" />
		<execute function="AssertTextEquals" locator1="UserBar#USER_SIGN_IN" value1="Sign In" />
	</command>

	<command name="viewLoggedOutWithCASEnabledPG">
		<execute function="AssertTextEquals" locator1="CAS#APP_NAME_HEADER" value1="Central Authentication Service (CAS)" />
		<execute function="AssertTextEquals" locator1="CAS#LOGOUT_SUCCESSFUL_HEADER" value1="Logout successful" />
		<execute function="AssertTextEquals" locator1="CAS#LOGOUT_SUCCESSFUL_MESSAGE_1" value1="You have successfully logged out of the Central Authentication Service." />
		<execute function="AssertTextEquals" locator1="CAS#LOGOUT_SUCCESSFUL_MESSAGE_2" value1="For security reasons, exit your web browser." />
	</command>

	<command name="viewLoginPG">
		<if>
			<equals arg1="${authenticationMethod}" arg2="By Screen Name" />
			<then>
				<execute function="AssertElementPresent" locator1="TextInput#SCREEN_NAME" />
			</then>
			<else>
				<execute function="AssertElementPresent" locator1="TextInput#EMAIL_ADDRESS" />
			</else>
		</if>

		<execute function="AssertElementPresent" locator1="TextInput#PASSWORD" />

		<execute function="AssertElementPresent" locator1="Checkbox#REMEMBER_ME" />

		<execute function="AssertTextEquals" locator1="Button#SIGN_IN" value1="Sign In" />
	</command>

	<command name="viewNoUsersFoundCP">
		<execute function="AssertTextEquals" locator1="Message#EMPTY_INFO" value1="No users were found." />
	</command>

	<command name="viewUserCustomFieldsCP">
		<var name="key_customFieldName" value="${customFieldName}" />

		<execute function="AssertTextEquals" locator1="UsersAndOrganizationsEditUser#CUSTOM_FIELDS_LABEL" value1="${customFieldName}" />

		<if>
			<equals arg1="${customFieldName}" arg2="Boolean" />
			<then>
				<execute function="AssertSelectedLabel" locator1="UsersAndOrganizationsEditUser#CUSTOM_FIELDS_SELECT" value1="${customFieldValue}" />
			</then>
		</if>
	</command>

	<command name="viewUserInfomationOrganizationSitesCP">
		<execute macro="UserNavigator#gotoMemberships" />

		<var name="key_siteName" value="${siteName}" />

		<execute function="AssertTextEquals" locator1="UsersAndOrganizationsEditUser#SITES_TABLE_NAME" value1="${orgName}" />
	</command>

	<command name="viewUserInfomationRolesCP">
		<execute macro="UserNavigator#gotoRoles" />

		<var name="key_roleTitle" value="${roleTitle}" />

		<execute function="AssertTextEquals" locator1="UsersAndOrganizationsEditUser#ROLES_REGULAR_ROLES_TABLE_TITLE" value1="${roleTitle}" />
	</command>

	<command name="viewUserInfomationSitesCP">
		<execute macro="UserNavigator#gotoMemberships" />

		<var name="key_siteName" value="${siteName}" />

		<execute function="AssertTextEquals" locator1="UsersAndOrganizationsEditUser#SITES_TABLE_NAME" value1="${siteName}" />
	</command>

	<command name="viewUserInfomationUserGroupsCP">
		<execute macro="UserNavigator#gotoMemberships" />

		<var name="key_userGroupName" value="${userGroupName}" />

		<execute function="AssertTextEquals" locator1="UsersAndOrganizationsEditUser#USER_GROUPS_TABLE_NAME" value1="${userGroupName}" />
	</command>

	<command name="viewUserSiteCP">
		<execute macro="UserNavigator#gotoMemberships" />

		<var name="key_siteName" value="${siteName}" />

		<execute function="AssertTextEquals" locator1="UsersAndOrganizationsEditUser#SITES_TABLE_NAME" value1="${siteName}" />
	</command>
</definition>