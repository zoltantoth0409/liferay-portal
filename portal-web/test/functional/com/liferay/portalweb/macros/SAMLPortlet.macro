definition {

	macro addIdentityProviderConnection {
		Type(
			locator1 = "TextInput#SAML_NAME_FIELD",
			value1 = "${IdpNameID}");

		Type(
			locator1 = "CPSAMLAdminIdentityProviderConnection#IDENTITY_PROVIDER_CONNECTION_ENTITY_ID_FIELD",
			value1 = "${IdpEntityID}");

		Type(
			locator1 = "TextInput#SAML_METADATA_URL_FIELD",
			value1 = "${IdpMetadataURL}");

		if (isSet(nameIdentifierFormat)) {
			Select(
				locator1 = "Select#SAML_NAME_IDENTIFIER_FORMAT_SELECT",
				value1 = "${nameIdentifierFormat}");
		}
		else {
			Select(
				locator1 = "Select#SAML_NAME_IDENTIFIER_FORMAT_SELECT",
				value1 = "Email Address");
		}

		if (isSet(IdpKeepAliveURL)) {
			Type(
				locator1 = "CPSAMLAdmin#SAML_KEEP_ALIVE_URL",
				value1 = "${IdpKeepAliveURL}");
		}

		PortletEntry.save();
	}

	macro addServiceProviderConnection {
		AssertClick(
			locator1 = "CPSAMLAdminServiceProviderConnections#ADD_SERVICE_PROVIDER_BUTTON",
			value1 = "Add Service Provider");

		Type(
			locator1 = "TextInput#SAML_NAME_FIELD",
			value1 = "${SPNameID}");

		Type(
			locator1 = "CPSAMLAdminServiceProviderConnections#SERVICE_PROVIDER_CONNECTION_ENTITY_ID_FIELD",
			value1 = "${SPEntityID}");

		Check(locator1 = "CPSAMLAdminServiceProviderConnections#SERVICE_PROVIDER_CONNECTION_ENABLED_CHECKBOX");

		Type(
			locator1 = "TextInput#SAML_METADATA_URL_FIELD",
			value1 = "${SPMetadataURL}");

		if (isSet(nameIdentifierAttributeName)) {
			Type(
				locator1 = "CPSAMLAdminServiceProviderConnections#SERVICE_PROVIDER_CONNECTION_NAME_IDENTIFIER_ATTRIBUTE_NAME_FIELD",
				value1 = "${nameIdentifierAttributeName}");
		}

		if (isSet(nameIdentifierFormat)) {
			Select(
				locator1 = "Select#SAML_NAME_IDENTIFIER_FORMAT_SELECT",
				value1 = "${nameIdentifierFormat}");
		}

		if (isSet(Attributes)) {
			Check(locator1 = "CPSAMLAdminServiceProviderConnections#SERVICE_PROVIDER_CONNECTION_ATTRIBUTE_ENABLE");

			Type(
				locator1 = "CPSAMLAdminServiceProviderConnections#SERVICE_PROVIDER_CONNECTION_ATTRIBUTE_TEXTAREA",
				value1 = "${Attributes}");
		}

		if (isSet(SPKeepAliveURL)) {
			Type(
				locator1 = "CPSAMLAdmin#SAML_KEEP_ALIVE_URL",
				value1 = "${SPKeepAliveURL}");
		}

		PortletEntry.save();
	}

	macro configureIdentityProvider {
		if ("${signMetadata}" == "disable") {
			Uncheck(locator1 = "CPSAMLAdminIdentityProvider#IDENTITY_PROVIDER_SIGN_METADATA_CHECKBOX");
		}
		else {
			Check(locator1 = "CPSAMLAdminIdentityProvider#IDENTITY_PROVIDER_SIGN_METADATA_CHECKBOX");
		}

		if ("${authnRequestSignatureRequired}" == "disable") {
			Uncheck(locator1 = "CPSAMLAdminIdentityProvider#IDENTITY_PROVIDER_AUTHN_REQUEST_SIGNATURE_REQUIRED_CHECKBOX");
		}
		else {
			Check(locator1 = "CPSAMLAdminIdentityProvider#IDENTITY_PROVIDER_AUTHN_REQUEST_SIGNATURE_REQUIRED_CHECKBOX");
		}

		PortletEntry.save();
	}

	macro configureIdentityProviderConnection {
		if ("${forceAuthn}" == "enable") {
			Check(locator1 = "CPSAMLAdminIdentityProviderConnection#IDENTITY_PROVIDER_CONNECTION_FORCE_AUTHN_CHECKBOX");
		}

		PortletEntry.save();
	}

	macro configureServiceProvider {
		if ("${signAuthnRequests}" == "disable") {
			Uncheck(locator1 = "CPSAMLAdminServiceProvider#SERVICE_PROVIDER_SIGN_AUTHN_REQUESTS_CHECKBOX");
		}

		if ("${enbleLDAPImport}" == "true") {
			Check(locator1 = "CPSAMLAdminServiceProvider#SERVICE_PROVIDER_LDAP_IMPORT_ENABLED_CHECKBOX");
		}

		PortletEntry.save();
	}

}