{namespace com.liferay.layout.content.page.editor.web.FragmentsEditorToolbar}

/**
 * FragmentsEditorToolbar
 */
{template .render}
	{@param? availableSegmentsEntries: ?}
	{@param? _handleDiscardDraft: any}
	{@param? _handleToggleContextualSidebarButtonClick: any}
	{@param? classPK: ?}
	{@param? defaultSegmentsExperienceId: string }
	{@param? discardDraftURL: string}
	{@param? draft: bool}
	{@param? fragmentsEditorSidebarVisible: bool}
	{@param? lastSaveDate: string}
	{@param? portletNamespace: string}
	{@param? publishURL: string}
	{@param? redirectURL: string}
	{@param? savingChanges: bool}
	{@param? spritemap: string}
	{@param? status: string}
	{@param? store: ?}

	{let $toolbarClasses kind="text"}
		fragments-editor-toolbar
		{sp}management-bar
		{sp}navbar
		{sp}navbar-expand-md

		{if $fragmentsEditorSidebarVisible}
			{sp}fragments-editor-toolbar--padded
		{/if}
	{/let}

	<div class="{$toolbarClasses}">
		<div class="container-fluid container-fluid-max-xl">
			<ul class="navbar-nav">
				{if $defaultSegmentsExperienceId }
					<li class="nav-item">
						{call com.liferay.layout.content.page.editor.web.SegmentsExperienceSelector.render}
							{param availableSegmentsEntries: $availableSegmentsEntries /}
							{param defaultSegmentsExperienceId: $defaultSegmentsExperienceId /}
							{param spritemap: $spritemap ?: '' /}
							{param store: $store /}
						{/call}
					</li>
				{/if}

				<li class="nav-item">
					{call com.liferay.layout.content.page.editor.web.TranslationStatus.render}
						{param store: $store /}
					{/call}
				</li>
			</ul>

			<ul class="navbar-nav">
				<li class="nav-item">
					<span class="navbar-text">
						{if $savingChanges}
							{msg desc=""}saving-changes{/msg}
						{elseif $lastSaveDate and not $draft}
							{msg desc=""}changes-saved-at-{$lastSaveDate}{/msg}
						{elseif $lastSaveDate and $draft}
							{msg desc=""}draft-saved-at-{$lastSaveDate}{/msg}
						{/if}
					</span>
				</li>

				{if $status}
					<li class="nav-item">
						<span class="label label-secondary">{$status}</span>
					</li>
				{/if}

				{if $discardDraftURL}
					<li class="nav-item">
						<form action="{$discardDraftURL}" data-onsubmit="{$_handleDiscardDraft}" method="POST">
							<input
								name="{$portletNamespace ?: ''}classPK"
								type="hidden"
								value="{$classPK ?: ''}"
							/>

							<input
								name="{$portletNamespace}redirect"
								type="hidden"
								value="{$redirectURL}"
							/>

							<button class="btn btn-default nav-btn" type="submit">
								{msg desc=""}discard-draft{/msg}
							</button>
						</form>
					</li>
				{/if}

				{if $publishURL}
					<li class="nav-item">
						<form action="{$publishURL}" method="POST">
							<input
								name="{$portletNamespace ?: ''}classPK"
								type="hidden"
								value="{$classPK ?: ''}"
							/>

							<input
								name="{$portletNamespace}redirect"
								type="hidden"
								value="{$redirectURL}"
							/>

							<button class="btn btn-primary nav-btn" type="submit">
								{if $draft}
									{msg desc=""}publish-page{/msg}
								{else}
									{msg desc=""}publish{/msg}
								{/if}
							</button>
						</form>
					</li>
				{/if}

				<li class="nav-item">
					<button
						class="btn btn-outline-borderless btn-outline-dark btn-monospaced fragments-editor-toolbar__add-fragment-button"
						data-onclick="{$_handleToggleContextualSidebarButtonClick}"
					>
						<span class="inline-item">
							<svg class="icon-monospaced lexicon-icon">
								<use xlink:href="{$spritemap}#plus"></use>
							</svg>
						</span>
					</button>
				</li>
			</ul>
		</div>
	</div>
{/template}